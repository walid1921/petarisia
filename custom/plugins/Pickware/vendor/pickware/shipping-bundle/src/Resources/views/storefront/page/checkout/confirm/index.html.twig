{% sw_extends '@Storefront/storefront/page/checkout/confirm/index.html.twig' %}

{% block page_checkout_confirm_revocation_control %}
    {{ parent() }}

    <div data-pickware-checkout-confirmation>
        {% set shippingContext = context.extensions.pickwareSalesChannelContext.payload.shipping %}
        {% if page.extensions.pickwareShippingPrivacyConfiguration.emailTransferPolicy.value == 'ask_customer' %}
            <form action="{{ path('frontend.checkout.configure') }}"
                  method="POST"
                  id="pickware-shipping-data-transfer-form">

                <div class="form-check">
                    <input type="checkbox"
                           id="pickware-shipping-transfer-email-input"
                           class="form-check-input checkout-confirm-tos-checkbox"
                           {% if shippingContext.allow_email_transfer == 'true' %}checked{% endif %}>
                    <label for="pickware-shipping-transfer-email-input"
                           class="form-check-label checkout-confirm-tos-label">
                        {{ 'pickware-shipping-bundle.data-transfer.allow-email-transfer' | trans }}
                    </label>
                </div>
            </form>
        {% endif %}
    </div>
{% endblock %}
