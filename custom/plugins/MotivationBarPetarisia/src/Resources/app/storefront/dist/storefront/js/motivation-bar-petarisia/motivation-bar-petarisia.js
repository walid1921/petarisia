(()=>{"use strict";var t={156:t=>{var e=function(t){var e;return!!t&&"object"==typeof t&&"[object RegExp]"!==(e=Object.prototype.toString.call(t))&&"[object Date]"!==e&&t.$$typeof!==s},s="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function i(t,e){return!1!==e.clone&&e.isMergeableObject(t)?n(Array.isArray(t)?[]:{},t,e):t}function a(t,e,s){return t.concat(e).map(function(t){return i(t,s)})}function l(t){return Object.keys(t).concat(Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter(function(e){return Object.propertyIsEnumerable.call(t,e)}):[])}function r(t,e){try{return e in t}catch(t){return!1}}function n(t,s,o){(o=o||{}).arrayMerge=o.arrayMerge||a,o.isMergeableObject=o.isMergeableObject||e,o.cloneUnlessOtherwiseSpecified=i;var h,c,d=Array.isArray(s);return d!==Array.isArray(t)?i(s,o):d?o.arrayMerge(t,s,o):(c={},(h=o).isMergeableObject(t)&&l(t).forEach(function(e){c[e]=i(t[e],h)}),l(s).forEach(function(e){(!r(t,e)||Object.hasOwnProperty.call(t,e)&&Object.propertyIsEnumerable.call(t,e))&&(r(t,e)&&h.isMergeableObject(s[e])?c[e]=(function(t,e){if(!e.customMerge)return n;var s=e.customMerge(t);return"function"==typeof s?s:n})(e,h)(t[e],s[e],h):c[e]=i(s[e],h))}),c)}n.all=function(t,e){if(!Array.isArray(t))throw Error("first argument should be an array");return t.reduce(function(t,s){return n(t,s,e)},{})},t.exports=n}},e={};function s(i){var a=e[i];if(void 0!==a)return a.exports;var l=e[i]={exports:{}};return t[i](l,l.exports,s),l.exports}s.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return s.d(e,{a:e}),e},s.d=(t,e)=>{for(var i in e)s.o(e,i)&&!s.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},s.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var i=s(156),a=s.n(i);class l{static ucFirst(t){return t.charAt(0).toUpperCase()+t.slice(1)}static lcFirst(t){return t.charAt(0).toLowerCase()+t.slice(1)}static toDashCase(t){return t.replace(/([A-Z])/g,"-$1").replace(/^-/,"").toLowerCase()}static toLowerCamelCase(t,e){let s=l.toUpperCamelCase(t,e);return l.lcFirst(s)}static toUpperCamelCase(t,e){return e?t.split(e).map(t=>l.ucFirst(t.toLowerCase())).join(""):l.ucFirst(t.toLowerCase())}static parsePrimitive(t){try{return/^\d+(.|,)\d+$/.test(t)&&(t=t.replace(",",".")),JSON.parse(t)}catch(e){return t.toString()}}}class r{constructor(t=document){this._el=t,t.$emitter=this,this._listeners=[]}publish(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=new CustomEvent(t,{detail:e,cancelable:s});return this.el.dispatchEvent(i),i}subscribe(t,e){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=this,a=t.split("."),l=s.scope?e.bind(s.scope):e;if(s.once&&!0===s.once){let e=l;l=function(s){i.unsubscribe(t),e(s)}}return this.el.addEventListener(a[0],l),this.listeners.push({splitEventName:a,opts:s,cb:l}),!0}unsubscribe(t){let e=t.split(".");return this.listeners=this.listeners.reduce((t,s)=>([...s.splitEventName].sort().toString()===e.sort().toString()?this.el.removeEventListener(s.splitEventName[0],s.cb):t.push(s),t),[]),!0}reset(){return this.listeners.forEach(t=>{this.el.removeEventListener(t.splitEventName[0],t.cb)}),this.listeners=[],!0}get el(){return this._el}set el(t){this._el=t}get listeners(){return this._listeners}set listeners(t){this._listeners=t}}class n{constructor(t,e={},s=!1){if(!(t instanceof Node)){console.warn(`There is no valid element given while trying to create a plugin instance for "${s}".`);return}this.el=t,this.$emitter=new r(this.el),this._pluginName=this._getPluginName(s),this.options=this._mergeOptions(e),this._initialized=!1,this._registerInstance(),this._init()}init(){console.warn(`The "init" method for the plugin "${this._pluginName}" is not defined. The plugin will not be initialized.`)}update(){}_init(){this._initialized||(this.init(),this._initialized=!0)}_update(){this._initialized&&this.update()}_mergeOptions(t){let e=[this.constructor.options,this.options,t];return e.push(this._getConfigFromDataAttribute()),e.push(this._getOptionsFromDataAttribute()),a().all(e.filter(t=>t instanceof Object&&!(t instanceof Array)).map(t=>t||{}))}_getConfigFromDataAttribute(){let t={};if("function"!=typeof this.el.getAttribute)return t;let e=l.toDashCase(this._pluginName),s=this.el.getAttribute(`data-${e}-config`);return s?window.PluginConfigManager.get(this._pluginName,s):t}_getOptionsFromDataAttribute(){let t={};if("function"!=typeof this.el.getAttribute)return t;let e=l.toDashCase(this._pluginName),s=this.el.getAttribute(`data-${e}-options`);if(s)try{return JSON.parse(s)}catch(t){console.error(`The data attribute "data-${e}-options" could not be parsed to json: ${t.message}`)}return t}_registerInstance(){window.PluginManager.getPluginInstancesFromElement(this.el).set(this._pluginName,this),window.PluginManager.getPlugin(this._pluginName,!1).get("instances").push(this)}_getPluginName(t){return t||(t=this.constructor.name),t}}let o=window.PluginManager;o.register("MotivationBar",class extends n{init(){this.currentTotal=parseFloat(this.el.dataset.currentTotal||"0"),this.maxGoal=parseFloat(this.el.dataset.maxGoal||"0"),this.progress=parseFloat(this.el.dataset.progress||"0"),this.fillEl=this.el.querySelector(".motivation-bar__fill"),this.tooltipEl=this.el.querySelector("[data-mb-tooltip]"),this.tooltipTextEl=this.el.querySelector("[data-mb-tooltip-text]"),this.messageEl=this.el.querySelector("[data-mb-message]"),this.modalOverlayEl=this.el.querySelector("[data-mb-modal-overlay]"),this.modalEl=this.el.querySelector("[data-mb-modal]"),this.modalCloseEl=this.el.querySelector("[data-mb-modal-close]"),this.modalTitleEl=this.el.querySelector("[data-mb-modal-title]"),this.modalBodyEl=this.el.querySelector("[data-mb-modal-body]"),this.modalIconEl=this.el.querySelector("[data-mb-modal-icon]"),this.modalStatusEl=this.el.querySelector("[data-mb-modal-status]"),this._messageAnimating=!1;try{this.goals=JSON.parse(this.el.dataset.goals||"[]")}catch(t){this.goals=[]}this.locale=this.el.dataset.locale||"en-US",this.currency=this.el.dataset.currency||"EUR",this._applyProgress();let t=this._updateMilestones();this._updateMessage(t),this._bindTooltipEvents(),this._bindModalEvents()}_applyProgress(){if(!this.fillEl)return;let t=Math.max(0,Math.min(100,this.progress)),e="mb_last_progress_pct",s=window.sessionStorage.getItem(e),i=null!==s?parseFloat(s):null,a=Number.isFinite(i)?Math.max(0,Math.min(100,i)):t;this.fillEl.style.transition="none",this.fillEl.style.width=`${a}%`,this.fillEl.offsetWidth,this.fillEl.style.transition="",requestAnimationFrame(()=>{this.fillEl.style.width=`${t}%`}),window.sessionStorage.setItem(e,String(t))}_formatMoney(t){return new Intl.NumberFormat(this.locale,{style:"currency",currency:this.currency}).format(t)}_updateMessage(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.messageEl)return;let e=[...this.goals].sort((t,e)=>t.amount-e.amount),s=e.find(t=>this.currentTotal<t.amount),i=e=>{t?this._setMessageAnimated(e):this.messageEl.innerHTML=e};if(!s){let t=e.map(t=>t.label),s="";1===t.length?s=t[0]:2===t.length?s=`${t[0]} and ${t[1]}`:t.length>2&&(s=`${t.slice(0,-1).join(", ")} and ${t.at(-1)}`),i(`Nice! You have <span class="motivation-bar__highlight">${this._escapeHtml(s)}</span> ðŸŽ‰`);return}let a=s.amount-this.currentTotal;i(`You only need <span class="motivation-bar__highlight">${this._formatMoney(a)}</span> for <span class="motivation-bar__highlight">${this._escapeHtml(s.label)}</span>!`)}_escapeHtml(t){let e=document.createElement("div");return e.textContent=String(t),e.innerHTML}_setMessageAnimated(t){if(!this.messageEl)return;let e=this.messageEl.innerHTML.trim(),s=String(t).trim();if(e===s)return;if(this._messageAnimating){this.messageEl.innerHTML=s;return}this._messageAnimating=!0,this.messageEl.classList.add("is-leaving");let i=t=>{"opacity"===t.propertyName&&(this.messageEl.removeEventListener("transitionend",i),this.messageEl.innerHTML=s,this.messageEl.classList.remove("is-leaving"),this.messageEl.classList.add("is-entering"),this.messageEl.offsetWidth,this.messageEl.classList.remove("is-entering"),window.setTimeout(()=>{this._messageAnimating=!1},190))};this.messageEl.addEventListener("transitionend",i)}_updateMilestones(){let t=this.el.querySelectorAll("[data-mb-goal]"),e=!1;return t.forEach(t=>{let s=parseFloat(t.dataset.goalAmount||"0"),i=this.currentTotal>=s,a=t.classList.contains("is-reached");if(t.classList.toggle("is-reached",i),t.setAttribute("aria-disabled",i?"false":"true"),t.tabIndex=i?0:-1,!a&&i){e=!0;let s=t.querySelector(".motivation-bar__goalDot");s&&(s.classList.remove("is-pop"),s.offsetWidth,s.classList.add("is-pop"),s.addEventListener("animationend",()=>{s.classList.remove("is-pop")},{once:!0}))}}),e}_bindTooltipEvents(){let t=this.el.querySelectorAll("[data-mb-goal]");this.tooltipEl&&this.tooltipTextEl&&t.length&&t.forEach(t=>{t.addEventListener("mouseenter",()=>{this.tooltipTextEl.textContent=t.dataset.goalLabel||"",this.tooltipEl.hidden=!1;let e=this.el.querySelector(".motivation-bar__track-wrapper").getBoundingClientRect(),s=t.getBoundingClientRect(),i=s.left+s.width/2-e.left,a=this.tooltipEl.offsetWidth,l=a/2,r=Math.max(l,Math.min(e.width-l,i));this.tooltipEl.style.left=`${r}px`;let n=i-(r-l);n=Math.max(7,Math.min(a-7,n)),this.tooltipEl.style.setProperty("--arrow-x",`${n}px`),this.tooltipEl.classList.add("is-visible")}),t.addEventListener("mouseleave",()=>{this.tooltipEl.classList.remove("is-visible"),this.tooltipEl.hidden=!0})})}_bindModalEvents(){let t=this.el.querySelectorAll("[data-mb-goal]");this.modalOverlayEl&&this.modalEl&&t.length&&(t.forEach(t=>{t.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation(),"true"!==t.getAttribute("aria-disabled")&&this._openModalFromGoal(t)})}),this.modalCloseEl&&this.modalCloseEl.addEventListener("click",t=>{t.preventDefault(),this._closeModal()}),this.modalOverlayEl.addEventListener("click",t=>{t.target===this.modalOverlayEl&&this._closeModal()}),document.addEventListener("keydown",t=>{"Escape"!==t.key||this.modalOverlayEl.hidden||this._closeModal()}))}_openModalFromGoal(t){let e=t.dataset.goalLabel||"",s=t.dataset.goalDescription||"",i=t.dataset.goalIcon||"",a=parseFloat(t.dataset.goalAmount||"0"),l=this.currentTotal>=a,r=Math.max(0,a-this.currentTotal);if(this.modalTitleEl&&(this.modalTitleEl.textContent=e),this.modalBodyEl&&(this.modalBodyEl.textContent=s),this.modalStatusEl&&(l?this.modalStatusEl.textContent=`Unlocked ðŸŽ‰`:this.modalStatusEl.textContent=`Spend ${this._formatMoney(r)} more to unlock`),this.modalIconEl){this.modalIconEl.innerHTML="";let t=this.el.querySelector(`[data-mb-icon-template="${CSS.escape(i)}"]`);t&&(this.modalIconEl.innerHTML=t.innerHTML)}this.modalOverlayEl.hidden=!1,this.modalEl.setAttribute("aria-hidden","false")}_closeModal(){this.modalEl.setAttribute("aria-hidden","true"),this.modalOverlayEl.hidden=!0}},"[data-motivation-bar]"),o.register("MotivationBar",class extends n{init(){this.lastScrollTop=0,this.scrollThreshold=5,this.headerHeight=this.el.offsetHeight,this._registerEvents()}_registerEvents(){window.addEventListener("scroll",this._onScroll.bind(this),{passive:!0})}_onScroll(){let t=window.pageYOffset||document.documentElement.scrollTop;if(!(t<0)){if(t<this.headerHeight){this.el.classList.remove("header-hidden"),this.el.classList.add("header-visible");return}if(Math.abs(t-this.lastScrollTop)<this.scrollThreshold)return;t>this.lastScrollTop?(this.el.classList.add("header-hidden"),this.el.classList.remove("header-visible")):(this.el.classList.remove("header-hidden"),this.el.classList.add("header-visible")),this.lastScrollTop=t}}},".header-autohide"),o.register("TopBarCarousel",class extends n{init(){this.items=this.el.querySelectorAll(".top-bar-carousel-item"),this.currentIndex=0,this.intervalTime=3e3,this.items.length>0&&this._startCarousel()}_startCarousel(){setInterval(()=>{this._nextSlide()},this.intervalTime)}_nextSlide(){this.items.forEach(t=>{t.classList.remove("active","fade-out")}),this.items[this.currentIndex].classList.add("fade-out"),this.currentIndex=(this.currentIndex+1)%this.items.length,this.items[this.currentIndex].classList.add("active")}},".top-bar-carousel")})();