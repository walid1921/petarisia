(()=>{"use strict";var t={156:t=>{var e=function(t){var e;return!!t&&"object"==typeof t&&"[object RegExp]"!==(e=Object.prototype.toString.call(t))&&"[object Date]"!==e&&t.$$typeof!==i},i="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function s(t,e){return!1!==e.clone&&e.isMergeableObject(t)?l(Array.isArray(t)?[]:{},t,e):t}function r(t,e,i){return t.concat(e).map(function(t){return s(t,i)})}function n(t){return Object.keys(t).concat(Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter(function(e){return Object.propertyIsEnumerable.call(t,e)}):[])}function a(t,e){try{return e in t}catch(t){return!1}}function l(t,i,o){(o=o||{}).arrayMerge=o.arrayMerge||r,o.isMergeableObject=o.isMergeableObject||e,o.cloneUnlessOtherwiseSpecified=s;var h,c,u=Array.isArray(i);return u!==Array.isArray(t)?s(i,o):u?o.arrayMerge(t,i,o):(c={},(h=o).isMergeableObject(t)&&n(t).forEach(function(e){c[e]=s(t[e],h)}),n(i).forEach(function(e){(!a(t,e)||Object.hasOwnProperty.call(t,e)&&Object.propertyIsEnumerable.call(t,e))&&(a(t,e)&&h.isMergeableObject(i[e])?c[e]=(function(t,e){if(!e.customMerge)return l;var i=e.customMerge(t);return"function"==typeof i?i:l})(e,h)(t[e],i[e],h):c[e]=s(i[e],h))}),c)}l.all=function(t,e){if(!Array.isArray(t))throw Error("first argument should be an array");return t.reduce(function(t,i){return l(t,i,e)},{})},t.exports=l}},e={};function i(s){var r=e[s];if(void 0!==r)return r.exports;var n=e[s]={exports:{}};return t[s](n,n.exports,i),n.exports}i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var s in e)i.o(e,s)&&!i.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var s=i(156),r=i.n(s);class n{static ucFirst(t){return t.charAt(0).toUpperCase()+t.slice(1)}static lcFirst(t){return t.charAt(0).toLowerCase()+t.slice(1)}static toDashCase(t){return t.replace(/([A-Z])/g,"-$1").replace(/^-/,"").toLowerCase()}static toLowerCamelCase(t,e){let i=n.toUpperCamelCase(t,e);return n.lcFirst(i)}static toUpperCamelCase(t,e){return e?t.split(e).map(t=>n.ucFirst(t.toLowerCase())).join(""):n.ucFirst(t.toLowerCase())}static parsePrimitive(t){try{return/^\d+(.|,)\d+$/.test(t)&&(t=t.replace(",",".")),JSON.parse(t)}catch(e){return t.toString()}}}class a{constructor(t=document){this._el=t,t.$emitter=this,this._listeners=[]}publish(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=new CustomEvent(t,{detail:e,cancelable:i});return this.el.dispatchEvent(s),s}subscribe(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=this,r=t.split("."),n=i.scope?e.bind(i.scope):e;if(i.once&&!0===i.once){let e=n;n=function(i){s.unsubscribe(t),e(i)}}return this.el.addEventListener(r[0],n),this.listeners.push({splitEventName:r,opts:i,cb:n}),!0}unsubscribe(t){let e=t.split(".");return this.listeners=this.listeners.reduce((t,i)=>([...i.splitEventName].sort().toString()===e.sort().toString()?this.el.removeEventListener(i.splitEventName[0],i.cb):t.push(i),t),[]),!0}reset(){return this.listeners.forEach(t=>{this.el.removeEventListener(t.splitEventName[0],t.cb)}),this.listeners=[],!0}get el(){return this._el}set el(t){this._el=t}get listeners(){return this._listeners}set listeners(t){this._listeners=t}}class l{constructor(t,e={},i=!1){if(!(t instanceof Node)){console.warn(`There is no valid element given while trying to create a plugin instance for "${i}".`);return}this.el=t,this.$emitter=new a(this.el),this._pluginName=this._getPluginName(i),this.options=this._mergeOptions(e),this._initialized=!1,this._registerInstance(),this._init()}init(){console.warn(`The "init" method for the plugin "${this._pluginName}" is not defined. The plugin will not be initialized.`)}update(){}_init(){this._initialized||(this.init(),this._initialized=!0)}_update(){this._initialized&&this.update()}_mergeOptions(t){let e=[this.constructor.options,this.options,t];return e.push(this._getConfigFromDataAttribute()),e.push(this._getOptionsFromDataAttribute()),r().all(e.filter(t=>t instanceof Object&&!(t instanceof Array)).map(t=>t||{}))}_getConfigFromDataAttribute(){let t={};if("function"!=typeof this.el.getAttribute)return t;let e=n.toDashCase(this._pluginName),i=this.el.getAttribute(`data-${e}-config`);return i?window.PluginConfigManager.get(this._pluginName,i):t}_getOptionsFromDataAttribute(){let t={};if("function"!=typeof this.el.getAttribute)return t;let e=n.toDashCase(this._pluginName),i=this.el.getAttribute(`data-${e}-options`);if(i)try{return JSON.parse(i)}catch(t){console.error(`The data attribute "data-${e}-options" could not be parsed to json: ${t.message}`)}return t}_registerInstance(){window.PluginManager.getPluginInstancesFromElement(this.el).set(this._pluginName,this),window.PluginManager.getPlugin(this._pluginName,!1).get("instances").push(this)}_getPluginName(t){return t||(t=this.constructor.name),t}}PluginManager.register("MotivationBar",class extends l{init(){this.currentTotal=parseFloat(this.el.dataset.currentTotal||"0"),this.maxGoal=parseFloat(this.el.dataset.maxGoal||"0"),this.progress=parseFloat(this.el.dataset.progress||"0"),this.fillEl=this.el.querySelector(".motivation-bar__fill"),this.tooltipEl=this.el.querySelector("[data-mb-tooltip]"),this.tooltipTextEl=this.el.querySelector("[data-mb-tooltip-text]"),this.messageEl=this.el.querySelector("[data-mb-message]");try{this.goals=JSON.parse(this.el.dataset.goals||"[]")}catch(t){this.goals=[]}this.locale=this.el.dataset.locale||"en-US",this.currency=this.el.dataset.currency||"EUR",this._applyProgress(),this._updateMessage(),this._updateMilestones(),this._bindTooltipEvents()}_applyProgress(){if(!this.fillEl)return;let t=Math.max(0,Math.min(100,this.progress)),e="mb_last_progress_pct",i=window.sessionStorage.getItem(e),s=null!==i?parseFloat(i):null,r=Number.isFinite(s)?Math.max(0,Math.min(100,s)):t;this.fillEl.style.transition="none",this.fillEl.style.width=`${r}%`,this.fillEl.offsetWidth,this.fillEl.style.transition="",requestAnimationFrame(()=>{this.fillEl.style.width=`${t}%`}),window.sessionStorage.setItem(e,String(t))}_formatMoney(t){return new Intl.NumberFormat(this.locale,{style:"currency",currency:this.currency}).format(t)}_updateMessage(){if(!this.messageEl)return;let t=[...this.goals].sort((t,e)=>t.amount-e.amount),e=t.find(t=>this.currentTotal<t.amount);if(!e){let e=t.map(t=>t.label),i="";1===e.length?i=e[0]:2===e.length?i=`${e[0]} and ${e[1]}`:e.length>2&&(i=`${e.slice(0,-1).join(", ")} and ${e.at(-1)}`),this.messageEl.textContent=`Nice! You have ${i} ðŸŽ‰`;return}let i=e.amount-this.currentTotal;this.messageEl.textContent=`You only need ${this._formatMoney(i)} for ${e.label}!`}_updateMilestones(){this.el.querySelectorAll("[data-mb-goal]").forEach(t=>{let e=parseFloat(t.dataset.goalAmount||"0"),i=this.currentTotal>=e;t.classList.toggle("is-reached",i)})}_bindTooltipEvents(){let t=this.el.querySelectorAll("[data-mb-goal]");this.tooltipEl&&this.tooltipTextEl&&t.length&&t.forEach(t=>{console.log(t),t.addEventListener("mouseenter",()=>{this.tooltipTextEl.textContent=t.dataset.goalLabel||"",t.classList.contains("is-reached")&&(this.tooltipEl.hidden=!1);let e=this.el.querySelector(".motivation-bar__track-wrapper").getBoundingClientRect(),i=t.getBoundingClientRect(),s=i.left+i.width/2-e.left,r=this.tooltipEl.offsetWidth,n=r/2,a=Math.max(n,Math.min(e.width-n,s));this.tooltipEl.style.left=`${a}px`;let l=s-(a-n);l=Math.max(7,Math.min(r-7,l)),this.tooltipEl.style.setProperty("--arrow-x",`${l}px`),this.tooltipEl.classList.add("is-visible")}),t.addEventListener("mouseleave",()=>{this.tooltipEl.classList.remove("is-visible"),this.tooltipEl.hidden=!0})})}},"[data-motivation-bar]")})();