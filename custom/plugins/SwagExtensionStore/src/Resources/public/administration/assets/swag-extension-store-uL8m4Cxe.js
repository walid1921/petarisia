const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-BsZmNlG0.js","assets/index-N545uvQi.css","assets/index-B9KUrNuD.js","assets/index-DUPQ0p__.css","assets/index-Byx0BsDj.js","assets/index-B0RsaVU4.css","assets/index-_SL6lh50.js","assets/index-FIGcEcc-.css","assets/index-Blaprb7h.js","assets/index-Dl_yw-Gl.css","assets/index-tXSw-CgH.js","assets/index-BoK6ytTg.css","assets/index-Dd9Kp9dI.js","assets/index-4AJ-3gZ2.css","assets/index-BfOseEqt.js","assets/index-sill3p1z.css","assets/index-LL5-5fQ2.js","assets/index-CrTblKKA.css","assets/index-lhyP4jpg.js","assets/index-D86yCN6L.css","assets/index-bhUWFysY.js","assets/index-CJNG0EjM.css","assets/index-BDVmH2uv.js","assets/index-D0hoS1Ul.css","assets/index-DaeaMNLJ.js","assets/index-CTG67Cjd.css","assets/index-DvBJBOO9.js","assets/index-CmJI9CLW.css","assets/index-BUrN8f6i.js","assets/index-hFy3IpB6.css","assets/index-DrPu5oHT.js","assets/index-DmFcILee.css","assets/index-DQeqGYt1.js","assets/index-74-FFmJT.css","assets/index-Cr6L6MLI.js","assets/index-BAvWdIly.css","assets/index-C2Ic2rwf.js","assets/index-C9GbjkOe.css","assets/index-DG_VinDN.js","assets/index-DEJW3V-I.css","assets/index-BkJD84yc.js","assets/index-BQYsrxQJ.css","assets/index-BW1bHCRm.js","assets/index-CozHBJhB.css","assets/index-B2RTz1Bn.js","assets/index-C6EJv79-.css"])))=>i.map(i=>d[i]);
const E="modulepreload",P=function(p){return window.__sw__.assetPath+"/bundles/swagextensionstore/administration/"+p},g={},r=function(e,t,i){let o=Promise.resolve();if(t&&t.length>0){let c=function(n){return Promise.all(n.map(d=>Promise.resolve(d).then(u=>({status:"fulfilled",value:u}),u=>({status:"rejected",reason:u}))))};document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),h=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));o=c(t.map(n=>{if(n=P(n),n in g)return;g[n]=!0;const d=n.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${n}"]${u}`))return;const l=document.createElement("link");if(l.rel=d?"stylesheet":E,d||(l.as="script"),l.crossOrigin="",l.href=n,h&&l.setAttribute("nonce",h),document.head.appendChild(l),d)return new Promise((w,S)=>{l.addEventListener("load",w),l.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${n}`)))})}))}function a(c){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=c,window.dispatchEvent(s),!s.defaultPrevented)throw c}return o.then(c=>{for(const s of c||[])s.status==="rejected"&&a(s.reason);return e().catch(a)})};Shopware.Component.override("sw-extension-card-base",()=>r(()=>import("./index-BsZmNlG0.js"),__vite__mapDeps([0,1])));const{Utils:C}=Shopware;class x{constructor(e,t){this.discountCampaignService=e,this.extensionService=t,this.EXTENSION_RENT_DURATIONS={MONTHLY:1,YEARLY:12}}orderVariantsByPricePerMonth(e){return e.toSorted((t,i)=>{const o=this.getPriceFromVariant(t,!0),a=this.getPriceFromVariant(i,!0);return o-a})}orderVariantsByRentDuration(e){return e.length===1?e:e.toSorted((t,i)=>!t.duration||!i.duration?0:t.duration-i.duration)}getCalculatedPrice(e){const t=this.isVariantOfTypeRent(e),i=this.getPriceFromVariant(e,t);return C.format.currency(i,"EUR",2)}getCalculatedPriceSnippet(e){if(e.length>1)return"sw-extension-store.general.labelFromPricePerMonth";const t=this.getRecommendedVariant(e);return this.getPriceSnippetForVariant(t)}getPriceSnippetForVariant(e){return this.isVariantOfTypeBuy(e)?"sw-extension-store.general.labelPriceOneTime":"sw-extension-store.general.labelPricePerMonth"}getPriceFromVariant(e,t=!1){if(this.isVariantDiscounted(e))return t?e==null?void 0:e.discountCampaign.discountedPricePerMonth:e==null?void 0:e.discountCampaign.discountedPrice;let i=0;return t&&(e!=null&&e.netPricePerMonth)?i=e.netPricePerMonth:e!=null&&e.netPrice&&(i=e.netPrice),i}getRecommendedVariant(e){return e.length===1?e[0]:this.orderVariantsByPricePerMonth(e)[0]}isExtensionDiscounted(e){return e.some(t=>this.isVariantDiscounted(t))}isVariantDiscounted(e){return!e||!e.discountCampaign||typeof e.discountCampaign.discountedPrice!="number"||e.discountCampaign.discountedPrice===e.netPrice?!1:this.discountCampaignService.isDiscountCampaignActive(e.discountCampaign)}isVariantOfTypeBuy(e){return(e==null?void 0:e.type)===this.extensionService.EXTENSION_VARIANT_TYPES.BUY}isVariantOfTypeFree(e){return(e==null?void 0:e.type)===this.extensionService.EXTENSION_VARIANT_TYPES.FREE}isVariantOfTypeRent(e){return(e==null?void 0:e.type)===this.extensionService.EXTENSION_VARIANT_TYPES.RENT}isRentDurationMonthly(e){return(e==null?void 0:e.duration)===this.EXTENSION_RENT_DURATIONS.MONTHLY}isRentDurationYearly(e){return(e==null?void 0:e.duration)===this.EXTENSION_RENT_DURATIONS.YEARLY}}const{Criteria:m}=Shopware.Data;class T extends Shopware.Classes.ApiService{constructor(e,t,i="extension-store"){super(e,t,i),this.name="extensionStoreDataService"}async listingFilters(e){return(await this.httpClient.get(`_action/${this.apiEndpoint}/store-filters`,{headers:this.basicHeaders(e),version:3})).data}async getExtensionList(e,t){const i=this._getCriteriaFromSearch(e),{data:o}=await this.httpClient.post(`_action/${this.apiEndpoint}/list`,i.parse(),{headers:this.basicHeaders(t),version:3}),a=[];return a.total=o.meta.total,a.push(...o.data),a}async getExtensionByName(e,t){return this.getExtensionList({term:e},t).then(i=>i.find(o=>o.name===e)??null)}async getDetail(e,t){const{data:i}=await this.httpClient.get(`_action/${this.apiEndpoint}/detail/${e}`,{headers:this.basicHeaders(t),version:3});return i}async getReviews(e,t,i){const o=new m(e,t),{data:a}=await this.httpClient.get(`_action/${this.apiEndpoint}/${i}/reviews`,{headers:this.basicHeaders(),params:o.parse(),version:3});return a}basicHeaders(e=null){const t={"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${this.loginService.getToken()}`};return e&&e.languageId&&(t["sw-language-id"]=e.languageId),t}_getCriteriaFromSearch({page:e=1,limit:t=25,rating:i=null,category:o=null,term:a=null,sorting:c=null,filter:s={}}={}){const h=new m(e,t);a&&h.setTerm(a);const n=[];return i!==null&&n.push(m.equals("rating",i)),Object.entries(s).forEach(([d,u])=>{n.push(m.equals(d,u))}),o!==null&&n.push(m.equals("category",o)),n.length>0&&h.addFilter(m.multi("AND",n)),c&&(h.resetSorting(),h.addSorting(c)),h}}class A extends Shopware.Classes.ApiService{constructor(e,t,i="extension-store"){super(e,t,i),this.name="extensionStoreLicensesService"}newCart(e,t){return this.httpClient.post(`/_action/${this.apiEndpoint}/cart/new`,{extensionId:e,variantId:t},{headers:this.basicHeaders(),version:3})}orderCart(e){return this.httpClient.post(`/_action/${this.apiEndpoint}/cart/order`,e,{headers:this.basicHeaders(),version:3})}getPaymentMeans(){return this.httpClient.get(`/_action/${this.apiEndpoint}/cart/payment-means`,{headers:this.basicHeaders(),version:3})}basicHeaders(e=null){const t={"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${this.loginService.getToken()}`};return e&&e.languageId&&(t["sw-language-id"]=e.languageId),t}}Shopware.Component.register("sw-extension-store-index",()=>r(()=>import("./index-B9KUrNuD.js"),__vite__mapDeps([2,3])));Shopware.Component.register("sw-extension-store-listing",()=>r(()=>import("./index-Byx0BsDj.js"),__vite__mapDeps([4,5])));Shopware.Component.register("sw-extension-store-detail",()=>r(()=>import("./index-_SL6lh50.js"),__vite__mapDeps([6,7])));Shopware.Component.register("sw-extension-store-slider",()=>r(()=>import("./index-Blaprb7h.js"),__vite__mapDeps([8,9])));Shopware.Component.register("sw-extension-store-listing-filter",()=>r(()=>import("./index-tXSw-CgH.js"),__vite__mapDeps([10,11])));Shopware.Component.register("sw-extension-buy-modal",()=>r(()=>import("./index-Dd9Kp9dI.js"),__vite__mapDeps([12,13])));Shopware.Component.register("sw-extension-listing-card",()=>r(()=>import("./index-BfOseEqt.js"),__vite__mapDeps([14,15])));Shopware.Component.register("sw-extension-store-update-warning",()=>r(()=>import("./index-LL5-5fQ2.js"),__vite__mapDeps([16,17])));Shopware.Component.register("sw-extension-label",()=>r(()=>import("./index-lhyP4jpg.js"),__vite__mapDeps([18,19])));Shopware.Component.register("sw-extension-type-label",()=>r(()=>import("./index-BpNQ2pWb.js"),[]));Shopware.Component.register("sw-extension-store-label-display",()=>r(()=>import("./index-bhUWFysY.js"),__vite__mapDeps([20,21])));Shopware.Component.register("sw-extension-store-error-card",()=>r(()=>import("./index-BDVmH2uv.js"),__vite__mapDeps([22,23])));Shopware.Component.register("sw-extension-store-accessibility",()=>r(()=>import("./index-DaeaMNLJ.js"),__vite__mapDeps([24,25])));Shopware.Component.register("sw-extension-store-statistics-promotion",()=>r(()=>import("./index-DvBJBOO9.js"),__vite__mapDeps([26,27])));Shopware.Component.register("sw-extension-store-in-app-purchases-listing-modal",()=>r(()=>import("./index-BUrN8f6i.js"),__vite__mapDeps([28,29])));Shopware.Application.addServiceProvider("extensionStoreService",()=>new x(Shopware.Service("shopwareDiscountCampaignService"),Shopware.Service("shopwareExtensionService")));Shopware.Application.addServiceProvider("extensionStoreDataService",()=>new T(Shopware.Application.getContainer("init").httpClient,Shopware.Service("loginService")));Shopware.Application.addServiceProvider("extensionStoreLicensesService",()=>new A(Shopware.Application.getContainer("init").httpClient,Shopware.Service("loginService")));Shopware.Module.register("sw-extension-store",{title:"sw-extension-store.general.title",name:"sw-extension-store.general.title",routePrefixName:"sw.extension",routePrefixPath:"sw/extension",routes:{store:{path:"store",redirect:{name:"sw.extension.store.listing"},meta:{privilege:"system.extension_store"},component:"sw-extension-store-index",children:{listing:{path:"listing",component:"sw-extension-store-listing",redirect:{name:"sw.extension.store.listing.app"},meta:{privilege:"system.extension_store"},children:{app:{path:"app",component:"sw-extension-store-listing",propsData:{isTheme:!1},meta:{privilege:"system.extension_store"}},theme:{path:"theme",component:"sw-extension-store-listing",propsData:{isTheme:!0},meta:{privilege:"system.extension_store"}}}}}},"store.detail":{component:"sw-extension-store-detail",path:"store/detail/:id",meta:{parentPath:"sw.extension.store",privilege:"system.extension_store"},props:{default:p=>({id:p.params.id})}}},routeMiddleware(p,e){e.name==="sw.extension.store.landing-page"&&(e.redirect={name:"sw.extension.store.listing"}),p(e)}});Shopware.Component.override("sw-dashboard-index",()=>r(()=>import("./index-DrPu5oHT.js"),__vite__mapDeps([30,31])));Shopware.Component.register("sw-dashboard-statistics-promotion-card",()=>r(()=>import("./index-DQeqGYt1.js"),__vite__mapDeps([32,33])));const{ApiService:_}=Shopware.Classes;class f extends _{constructor(e,t,i="in-app-purchases"){super(e,t,i),this.name="inAppPurchasesService"}async getExtension(e){return this.httpClient.get(`_action/${this.apiEndpoint}/${e}/details`,{headers:this.getBasicHeaders()}).then(_.handleResponse.bind(this))}async createCart(e,t,i){return this.httpClient.post(`_action/${this.apiEndpoint}/cart/new`,{name:e,feature:t,variant:i},{headers:this.getBasicHeaders()}).then(_.handleResponse.bind(this))}async orderCart(e,t,i){return this.httpClient.post(`_action/${this.apiEndpoint}/cart/order`,{taxRate:e,positions:t,name:i},{headers:this.getBasicHeaders()}).then(_.handleResponse.bind(this))}async getAvailablePurchases(e){return this.httpClient.get(`_action/${this.apiEndpoint}/${e}/list`,{headers:this.getBasicHeaders()}).then(_.handleResponse.bind(this))}async getPriceModels(e,t){return this.httpClient.get(`_action/${this.apiEndpoint}/${e}/${t}`,{headers:this.getBasicHeaders()}).then(_.handleResponse.bind(this))}async refreshInAppPurchases(){return this.httpClient.get(`_action/${this.apiEndpoint}/refresh`,{headers:this.getBasicHeaders()}).then(_.handleResponse.bind(this))}}Shopware.Component.override("sw-in-app-purchase-checkout",()=>r(()=>import("./index-Cr6L6MLI.js"),__vite__mapDeps([34,35])));Shopware.Component.register("sw-in-app-purchase-checkout-button",()=>r(()=>import("./index-C2Ic2rwf.js"),__vite__mapDeps([36,37])));Shopware.Component.register("sw-in-app-purchase-checkout-overview",()=>r(()=>import("./index-DG_VinDN.js"),__vite__mapDeps([38,39])));Shopware.Component.register("sw-in-app-purchase-checkout-state",()=>r(()=>import("./index-BkJD84yc.js"),__vite__mapDeps([40,41])));Shopware.Component.register("sw-in-app-purchase-checkout-subscription-change",()=>r(()=>import("./index-BW1bHCRm.js"),__vite__mapDeps([42,43])));Shopware.Component.register("sw-in-app-purchase-price-box",()=>r(()=>import("./index-B2RTz1Bn.js"),__vite__mapDeps([44,45])));Shopware.Application.addServiceProvider("inAppPurchasesService",()=>new f(Shopware.Application.getContainer("init").httpClient,Shopware.Service("loginService")));
