{"version":3,"file":"index-B_pWpqqy.js","sources":["../../../app/administration/src/module/swag-paypal-settings/view/swag-paypal-settings-storefront/swag-paypal-settings-storefront.html.twig","../../../app/administration/src/module/swag-paypal-settings/view/swag-paypal-settings-storefront/index.ts"],"sourcesContent":["<mt-card\n    class=\"swag-paypal-settings-express\"\n    position-identifier=\"swag-paypal-settings-express\"\n    :title=\"$t('swag-paypal-settings.express.title')\"\n    :subtitle=\"$t('swag-paypal-settings.express.subtitle')\"\n    :is-loading=\"settingsStore.isLoading\"\n>\n    <mt-banner v-if=\"doubleOptInConfig\" variant=\"attention\">\n        {{ $t('swag-paypal-settings.express.alertMessage') }}\n    </mt-banner>\n    <mt-banner v-if=\"phoneRequiredConfig\" variant=\"attention\">\n        <i18n-t keypath=\"swag-paypal-settings.express.alertMessagePhone\" tag=\"p\">\n            <template #url>\n                <a href=\"https://www.paypal.com/businessmanage/preferences/website\" target=\"_blank\">{{ $t('swag-paypal-settings.express.alertMessagePhoneLink') }}</a>\n            </template>\n        </i18n-t>\n    </mt-banner>\n\n    <swag-paypal-setting path=\"SwagPayPal.settings.ecsDetailEnabled\" />\n    <swag-paypal-setting path=\"SwagPayPal.settings.ecsCartEnabled\" />\n    <swag-paypal-setting path=\"SwagPayPal.settings.ecsOffCanvasEnabled\" />\n    <swag-paypal-setting path=\"SwagPayPal.settings.ecsLoginEnabled\" />\n    <swag-paypal-setting path=\"SwagPayPal.settings.ecsListingEnabled\" />\n\n    <swag-paypal-setting\n        path=\"SwagPayPal.settings.ecsButtonColor\"\n        :options=\"buttonColorOptions\"\n        :disabled=\"ecsSettingsDisabled\"\n    />\n\n    <swag-paypal-setting\n        path=\"SwagPayPal.settings.ecsButtonShape\"\n        :options=\"buttonShapeOptions\"\n        :disabled=\"ecsSettingsDisabled\"\n    />\n\n    <swag-paypal-setting\n        path=\"SwagPayPal.settings.ecsButtonLanguageIso\"\n        :disabled=\"ecsSettingsDisabled\"\n    >\n        <template #content=\"props\">\n            <swag-paypal-settings-locale-select\n                :name=\"props.path\"\n                :disabled=\"props.disabled\"\n                :value=\"props.currentValue\"\n                @update:value=\"props.updateCurrentValue\"\n            />\n        </template>\n    </swag-paypal-setting>\n\n    <swag-paypal-setting\n        path=\"SwagPayPal.settings.ecsShowPayLater\"\n        :disabled=\"ecsSettingsDisabled\"\n    />\n</mt-card>\n\n<mt-card\n    class=\"swag-paypal-settings-installment\"\n    position-identifier=\"swag-paypal-settings-installment\"\n    :title=\"$t('swag-paypal-settings.installment.title')\"\n    :subtitle=\"$t('swag-paypal-settings.installment.subtitle')\"\n    :is-loading=\"settingsStore.isLoading\"\n>\n    <swag-paypal-setting path=\"SwagPayPal.settings.installmentBannerDetailPageEnabled\" />\n    <swag-paypal-setting path=\"SwagPayPal.settings.installmentBannerCartEnabled\" />\n    <swag-paypal-setting path=\"SwagPayPal.settings.installmentBannerOffCanvasCartEnabled\" />\n    <swag-paypal-setting path=\"SwagPayPal.settings.installmentBannerLoginPageEnabled\" />\n    <swag-paypal-setting path=\"SwagPayPal.settings.installmentBannerFooterEnabled\" />\n</mt-card>\n\n<mt-card\n    class=\"swag-paypal-settings-spb\"\n    position-identifier=\"swag-paypal-settings-spb\"\n    :is-loading=\"settingsStore.isLoading\"\n>\n    <template #title>\n        <swag-paypal-setting\n            :bordered=\"false\"\n            :label=\"$t('swag-paypal-settings.spb.title')\"\n            path=\"SwagPayPal.settings.spbCheckoutEnabled\"\n            class=\"sw-card__title\"\n        />\n    </template>\n\n    <swag-paypal-setting\n        path=\"SwagPayPal.settings.spbAlternativePaymentMethodsEnabled\"\n        :disabled=\"sbpSettingsDisabled\"\n    />\n\n    <swag-paypal-setting\n        path=\"SwagPayPal.settings.spbShowPayLater\"\n        :disabled=\"sbpSettingsDisabled\"\n    />\n\n    <swag-paypal-setting\n        path=\"SwagPayPal.settings.spbButtonColor\"\n        :disabled=\"sbpSettingsDisabled\"\n        :options=\"buttonColorOptions\"\n    />\n\n    <swag-paypal-setting\n        path=\"SwagPayPal.settings.spbButtonShape\"\n        :disabled=\"sbpSettingsDisabled\"\n        :options=\"buttonShapeOptions\"\n    />\n\n    <swag-paypal-setting\n        path=\"SwagPayPal.settings.spbButtonLanguageIso\"\n        :disabled=\"sbpSettingsDisabled\"\n    >\n        <template #content=\"props\">\n            <swag-paypal-settings-locale-select\n                :name=\"props.path\"\n                :disabled=\"props.disabled\"\n                :value=\"props.currentValue\"\n                @update:value=\"props.updateCurrentValue\"\n            />\n        </template>\n    </swag-paypal-setting>\n</mt-card>\n","import template from './swag-paypal-settings-storefront.html.twig';\nimport { BUTTON_COLORS, BUTTON_SHAPES } from 'SwagPayPal/constant/swag-paypal-settings.constant';\nimport type EntityCollection from \"@shopware-ag/meteor-admin-sdk/es/_internals/data/EntityCollection\";\n\nconst { Criteria } = Shopware.Data;\n\nexport default Shopware.Component.wrapComponentConfig({\n    template,\n\n    inject: [\n        'systemConfigApiService',\n        'repositoryFactory',\n    ],\n\n    data() {\n        return {\n            doubleOptInConfig: false,\n            phoneRequiredConfig: false,\n        };\n    },\n\n    computed: {\n        settingsStore() {\n            return Shopware.Store.get('swagPayPalSettings');\n        },\n\n        buttonColorOptions() {\n            return BUTTON_COLORS.map((color) => ({\n                value: color,\n                label: this.$t(`swag-paypal-settings.options.buttonColor.${color}`),\n            }));\n        },\n\n        buttonShapeOptions() {\n            return BUTTON_SHAPES.map((shape) => ({\n                value: shape,\n                label: this.$t(`swag-paypal-settings.options.buttonShape.${shape}`),\n            }));\n        },\n\n        sbpSettingsDisabled(): boolean {\n            return !this.settingsStore.salesChannel && !this.settingsStore.getActual('SwagPayPal.settings.spbCheckoutEnabled');\n        },\n\n        ecsSettingsDisabled(): boolean {\n            return !this.settingsStore.salesChannel\n                && !this.settingsStore.getActual('SwagPayPal.settings.ecsDetailEnabled')\n                && !this.settingsStore.getActual('SwagPayPal.settings.ecsCartEnabled')\n                && !this.settingsStore.getActual('SwagPayPal.settings.ecsOffCanvasEnabled')\n                && !this.settingsStore.getActual('SwagPayPal.settings.ecsLoginEnabled')\n                && !this.settingsStore.getActual('SwagPayPal.settings.ecsListingEnabled');\n        },\n\n        systemConfigRepository() {\n            return this.repositoryFactory.create('system_config');\n        },\n\n        systemConfigCriteria() {\n            const criteria = new Criteria();\n\n            criteria.addFilter(Criteria.equalsAny('configurationKey', ['core.loginRegistration.doubleOptInGuestOrder', 'core.loginRegistration.phoneNumberFieldRequired']));\n\n            if (this.settingsStore.salesChannel) {\n                criteria.addFilter(Criteria.equalsAny('salesChannelId', [this.settingsStore.salesChannel, null]));\n            }\n\n            return criteria;\n        },\n    },\n\n    watch: {\n        'settingsStore.salesChannel': {\n            immediate: true,\n            handler() {\n                this.fetchDoubleOptIn();\n            },\n        },\n    },\n\n    methods: {\n        async fetchDoubleOptIn() {\n            const response = await this.systemConfigRepository.search(this.systemConfigCriteria);\n\n            this.doubleOptInConfig = this.getInheritedConfigValue(response, 'core.loginRegistration.doubleOptInGuestOrder');\n            this.phoneRequiredConfig = this.getInheritedConfigValue(response, 'core.loginRegistration.phoneNumberFieldRequired');\n        },\n\n        getInheritedConfigValue(response: EntityCollection<\"system_config\">, key: string): boolean {\n            if (!this.settingsStore.salesChannel) {\n                return response.some((config) => config.configurationKey === key && config.configurationValue === 'true');\n            }\n\n            const inheritedConfig = response.find((config) => !config.salesChannelId && config.configurationKey === key);\n            const specificConfig = response.find((config) => config.salesChannelId === this.settingsStore.salesChannel && config.configurationKey === key);\n\n            if (!specificConfig) {\n                return inheritedConfig?.configurationValue === 'true';\n            }\n\n            return specificConfig.configurationValue === 'true';\n        },\n    },\n});\n\n"],"names":["template","Criteria","index","BUTTON_COLORS","color","BUTTON_SHAPES","shape","criteria","response","key","config","inheritedConfig","specificConfig"],"mappings":"uEAAA,MAAeA,EAAA,w9GCIT,CAAE,SAAAC,CAAS,EAAI,SAAS,KAE9BC,EAAe,SAAS,UAAU,oBAAoB,CAClD,SAAAF,EAEA,OAAQ,CACJ,yBACA,mBACJ,EAEA,MAAO,CACI,MAAA,CACH,kBAAmB,GACnB,oBAAqB,EACzB,CACJ,EAEA,SAAU,CACN,eAAgB,CACL,OAAA,SAAS,MAAM,IAAI,oBAAoB,CAClD,EAEA,oBAAqB,CACV,OAAAG,EAAc,IAAKC,IAAW,CACjC,MAAOA,EACP,MAAO,KAAK,GAAG,4CAA4CA,CAAK,EAAE,CAAA,EACpE,CACN,EAEA,oBAAqB,CACV,OAAAC,EAAc,IAAKC,IAAW,CACjC,MAAOA,EACP,MAAO,KAAK,GAAG,4CAA4CA,CAAK,EAAE,CAAA,EACpE,CACN,EAEA,qBAA+B,CACpB,MAAA,CAAC,KAAK,cAAc,cAAgB,CAAC,KAAK,cAAc,UAAU,wCAAwC,CACrH,EAEA,qBAA+B,CAC3B,MAAO,CAAC,KAAK,cAAc,cACpB,CAAC,KAAK,cAAc,UAAU,sCAAsC,GACpE,CAAC,KAAK,cAAc,UAAU,oCAAoC,GAClE,CAAC,KAAK,cAAc,UAAU,yCAAyC,GACvE,CAAC,KAAK,cAAc,UAAU,qCAAqC,GACnE,CAAC,KAAK,cAAc,UAAU,uCAAuC,CAChF,EAEA,wBAAyB,CACd,OAAA,KAAK,kBAAkB,OAAO,eAAe,CACxD,EAEA,sBAAuB,CACb,MAAAC,EAAW,IAAIN,EAEZ,OAAAM,EAAA,UAAUN,EAAS,UAAU,mBAAoB,CAAC,+CAAgD,iDAAiD,CAAC,CAAC,EAE1J,KAAK,cAAc,cACVM,EAAA,UAAUN,EAAS,UAAU,iBAAkB,CAAC,KAAK,cAAc,aAAc,IAAI,CAAC,CAAC,EAG7FM,CAAA,CAEf,EAEA,MAAO,CACH,6BAA8B,CAC1B,UAAW,GACX,SAAU,CACN,KAAK,iBAAiB,CAAA,CAC1B,CAER,EAEA,QAAS,CACL,MAAM,kBAAmB,CACrB,MAAMC,EAAW,MAAM,KAAK,uBAAuB,OAAO,KAAK,oBAAoB,EAEnF,KAAK,kBAAoB,KAAK,wBAAwBA,EAAU,8CAA8C,EAC9G,KAAK,oBAAsB,KAAK,wBAAwBA,EAAU,iDAAiD,CACvH,EAEA,wBAAwBA,EAA6CC,EAAsB,CACnF,GAAA,CAAC,KAAK,cAAc,aACb,OAAAD,EAAS,KAAME,GAAWA,EAAO,mBAAqBD,GAAOC,EAAO,qBAAuB,MAAM,EAGtG,MAAAC,EAAkBH,EAAS,KAAME,GAAW,CAACA,EAAO,gBAAkBA,EAAO,mBAAqBD,CAAG,EACrGG,EAAiBJ,EAAS,KAAME,GAAWA,EAAO,iBAAmB,KAAK,cAAc,cAAgBA,EAAO,mBAAqBD,CAAG,EAE7I,OAAKG,EAIEA,EAAe,qBAAuB,QAHlCD,GAAA,YAAAA,EAAiB,sBAAuB,MAGN,CACjD,CAER,CAAC"}